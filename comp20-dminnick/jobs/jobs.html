
<!DOCTYPE html>

<html>

<head>
<title>Friends of Ming Chow Jobs Listing</title>
<script>
	
	var request;
	
	function init(){
		request = new XMLHttpRequest();
		request.open("GET","http://messagehub.herokuapp.com/lab8.json", true);
		request.send(null);
		request.onreadystatechange = callback;
	}
	
	function error(num){
		msg = "Error " + num + ". Could not parse data from server";
		alert(msg);
		document.location = "zoid.png";
	}
	
	function callback(){
		if(request.readyState == 4){
			try{
				parse(request.responseText)
			}
			catch(err){
				error("'taco'");
				
			}
		}
	}
	
	function parse(str) {
		jobs = JSON.parse(str);
		document.write("<link media='print, screen and (min-device-width: 700px)' href='http://fleetofthemalden.github.com/resources/default.css' rel='stylesheet' /><link media='only screen and (max-device-width: 700px)' href='http://fleetofthemalden.github.com/resources/mobile.css' rel='stylesheet' />");
		document.write("<h1>Friends of Ming Chow</h1><div>");
		for(i=0; i<jobs.length; i++){
			j = i + 1;
			document.write("<h3>Job " + j + ":</h3><h4>Company:   " + jobs[i]["company"] + "<br />Position:     " + jobs[i]["position"] + "<br />Location:    " + jobs[i]["location"] + "</h4><br />");
			
		}
		document.write("<p>This page brought to you by: <a href='http://www.minnick.co'>minnick.co</a></p></div>");
	}
	
	
</script>
</head>

<body onload="init()">
<div id="list"></div>
</body>

</html>
